<project name="StatServer Build" default="05sendJarToDestination">
	
	<property name="buildpath" value="home/tomasz/Dropbox/uni/diplomarbeit/exec/"/>
	<property name="NetworkInterfaceName" value="wlan0"/>

	<target name="00getStatServer">
		<exec executable="bash" outputproperty="statServerIP">
			<arg value="-c"/>
			<arg value=" ifconfig ${NetworkInterfaceName} | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}'"/>
		</exec>
	</target>
    <target name="01wsimport" depends="00getStatServer">
 
        <exec executable="wsimport">
 
            <arg line="-keep -s ./src -p gossip.stat.client.soap http://${statServerIP}:8000/gossip?wsdl"/>
 
        </exec>
        

    </target>
    <target name="04createJar" depends="03compile"><jar destfile="${buildpath}gossip.jar" basedir="${buildpath}build">
	<manifest>
		<attribute name='"Main-Class"' value="gossip.main.Main"></attribute></manifest></jar></target>
    <target name="05sendJarToDestination" depends="04createJar">
    	<exec executable="sshpass">
    		<arg
    			line="-p *H1mm3l. scp ${buildpath}gossip.jar tomasz3@uhu.imp.fu-berlin.de:/home/mi/tomasz3/testbed/gossip.jar">
    		</arg>
    	</exec>
    </target>
    <target name="02clean" description="Delete old build artifacts."
    	depends="01wsimport">
    	<delete
    		dir="${buildpath}build">
    	</delete>
    	<mkdir
    		dir="${buildpath}build">
    	</mkdir>
    </target>
    <target name="03compile" depends="02clean">
    	<javac srcdir="src" destdir="${buildpath}build"></javac></target>



</project>